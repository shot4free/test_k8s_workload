---

registry:
  image:
    # Note: if this version changes you must
    # also update the corresponding
    # CI_APPLICATION_TAG for this environment
    # in the container_scanning job
    tag: v2.7.7-gitlab

gitlab:
  mailroom:
    enabled: true
    image:
      tag: 0.9.1
  sidekiq:
    enabled: true
    image:
      tag: 12-7-202001151606-567a7811ae4-5db6dd45482

global:
  appConfig:
    incomingEmail:
      enabled: true
      address: "incoming-staging+%{key}@gitlab.com"
      user: "incoming-staging@gitlab.com"
    lfs:
      enabled: true
      bucket: gitlab-gstg-lfs-objects
    artifacts:
      enabled: true
      bucket: gitlab-gstg-artifacts
    uploads:
      enabled: true
      bucket: gitlab-gstg-uploads
    packages:
      enabled: true
      bucket: gitlab-gstg-package-repo
    omniauth:
      enabled: true
      blockAutoCreatedUsers: false
      providers:
        - secret: gitlab-google-oauth2
          key: provider
  email:
    from: gitlab@mg.gitlab.com
    reply_to: noreply@gitlab.com

  gitaly:
    external:
      - name: default
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file01
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file02
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file03
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file04
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file05
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file06
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file07
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file08
        hostname: file-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file09
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file10
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file11
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file12
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file13
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file14
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file15
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file16
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file17
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file18
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file19
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file20
        hostname: file-02-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file21
        hostname: file-zfs-01-stor-gstg.c.gitlab-staging-1.internal
        port: 9999
      - name: nfs-file22
        hostname: i.gstg-gcp-tcp-lb-internal-praefect.il4.us-east1.lb.gitlab-staging-1.internal
        port: 2305
  hosts:
    gitlab:
      name: staging.gitlab.com
    registry:
      name: registry.staging.gitlab.com

  psql:
    database: gitlabhq_production_sidekiq
    host: pgbouncer-sidekiq.int.gstg.gitlab.net
    port: 6432

  redis:
    host: "gstg-redis-sidekiq"
    sentinels:
      - host: "redis-sidekiq-01-db-gstg.c.gitlab-staging-1.internal"
        port: "26379"
      - host: "redis-sidekiq-02-db-gstg.c.gitlab-staging-1.internal"
        port: "26379"
      - host: "redis-sidekiq-03-db-gstg.c.gitlab-staging-1.internal"
        port: "26379"

  smtp:
    address: smtp.mailgun.org
    authentication: plain
    domain: mg.staging.gitlab.com
    enabled: true
    password:
      key: secret
      secret: gitlab-smtp-credential
    starttls_auto: true
    user_name: postmaster@mg.staging.gitlab.com
